**Summary**

These scripts create Hive external tables on cold storage blobs, execute Hive queries that calculate the number of events for each device and display the results. You will need to provision your HDInsight cluster in the same storage account as your cold storage.

1. hivequeryforcoldstorageeventprocessor.ps1: uses blob files generated by the custom .NET Cold Storage Event Processor
1. hivequeryforstreamanalytics.ps1: uses blob files generated by the cold storage Stream Analytics job

**Supporting multiple blob directories**
 
 The current version of this query supports the use of only one storage account. Depending on the naming strategy you choose for your cold storage solution, and in order for the query to return a result set, the [directoryPath] parameter should contain blobs directly in it.
 
 If you wish to query data in multiple directories from a parent directory, consider partitioning the hive table so that each partition includes the blobs in each directory tree.